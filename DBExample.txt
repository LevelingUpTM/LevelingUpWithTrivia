-- Creating new Users Table
CREATE TABLE Users (
    UserID INTEGER PRIMARY KEY AUTOINCREMENT,
    Username VARCHAR(255) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL
);

-- Adding a new user
INSERT INTO Users (Username, Password, Email)
VALUES ('user1', 'pass1', 'first@gmail.com');

-- Checking if a user exsists 
SELECT * FROM Users WHERE Username = 'user1';

-- Checking if the password is correcr
SELECT * FROM Users 
WHERE Username = 'user1' 
AND Password = 'pass1';


--------------------------------------

-- questions table 
CREATE TABLE questions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    question TEXT,
    answer_1 TEXT,
    answer_2 TEXT,
    answer_3 TEXT,
    answer_4 TEXT,
    correct_answer INTEGER,
    difficulty TEXT,
    category TEXT
);


-- statistics table
CREATE TABLE IF NOT EXISTS statistics (
    UserID INTEGER PRIMARY KEY,
    TotalCorrectAnswers INTEGER DEFAULT 0,
    TotalAnswers INTEGER DEFAULT 0,
    TotalGames INTEGER DEFAULT 0,
    TotalTime REAL DEFAULT 0.0,
    FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE
);


-- getNumOfCorrectAnswers(string username) :
SELECT TotalCorrectAnswers
FROM statistics
JOIN Users ON Users.UserID = statistics.UserID
WHERE Username = ?; 


-- getNumOfTotalAnswers(string username)
SELECT TotalAnswers
FROM statistics
JOIN Users ON Users.UserID = statistics.UserID
WHERE Username = ?;


-- getNumOfPlayerGames(string username)
SELECT TotalGames
FROM statistics
JOIN Users ON Users.UserID = statistics.UserID
WHERE Username = ?;


-- getPlayerAverageAnswerTime(string username) - need to take (total_time / total_answers)
SELECT TotalTime, TotalAnswers
FROM statistics
JOIN Users ON Users.UserID = statistics.UserID
WHERE Username = ?;
